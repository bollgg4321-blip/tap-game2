<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Tap Game 20 Seconds</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f0f0;
        text-align: center;
        overflow: hidden;
    }
    #info {
        margin: 10px;
        font-size: 18px;
    }
    #tapBtn {
        position: absolute;
        font-size: 24px;
        padding: 18px 35px;
        cursor: pointer;
    }
    .enemy {
        position: absolute;
        font-size: 40px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>üéÆ ‡πÄ‡∏Å‡∏°‡∏Å‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>

<div id="info">
    ‚ù§Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏î: <span id="hp">3</span> |
    üéØ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span> |
    üèÜ ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <span id="highscore">0</span> |
    ‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤: <span id="time">20</span>
</div>

<button id="tapBtn">‡∏Å‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>

<audio id="clickSound">
  <source src="https://www.soundjay.com/buttons/sounds/button-16.mp3">
</audio>

<script>
let score = 0;
let timeLeft = 20; // ‚è±Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
let hp = 3;
let gameOver = false;
let timePaused = false;

let highscore = localStorage.getItem("highscore") || 0;
document.getElementById("highscore").innerText = highscore;

const btn = document.getElementById("tapBtn");
const sound = document.getElementById("clickSound");

// üéØ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
btn.addEventListener("click", () => {
    if (gameOver) return;

    timePaused = true;
    score++;
    document.getElementById("score").innerText = score;

    sound.currentTime = 0;
    sound.play();
    moveButton();

    setTimeout(() => {
        timePaused = false;
    }, 300);
});

// üîÄ ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏¢‡∏±‡∏ö
function moveButton() {
    btn.style.left = Math.random() * (window.innerWidth - 120) + "px";
    btn.style.top = Math.random() * (window.innerHeight - 160) + "px";
}

// ‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô
setInterval(() => {
    if (gameOver || timePaused) return;

    timeLeft--;
    document.getElementById("time").innerText = timeLeft;

    if (timeLeft <= 0) endGame();
}, 1000);

// üëæ ‡∏®‡∏±‡∏ï‡∏£‡∏π
function spawnEnemy() {
    if (gameOver) return;

    let enemy = document.createElement("div");
    enemy.className = "enemy";
    enemy.innerText = "üëæ";

    enemy.style.left = Math.random() * (window.innerWidth - 50) + "px";
    enemy.style.top = Math.random() * (window.innerHeight - 100) + "px";

    enemy.onclick = () => {
        enemy.remove();
        hit();
    };

    document.body.appendChild(enemy);
    setTimeout(() => enemy.remove(), 1500);
}
setInterval(spawnEnemy, 1400);

// üí• ‡πÇ‡∏î‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π
function hit() {
    hp--;
    document.getElementById("hp").innerText = hp;
    if (hp <= 0) endGame();
}

// üíÄ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö
function endGame() {
    gameOver = true;
    if (score > highscore) localStorage.setItem("highscore", score);
    alert("‡πÄ‡∏Å‡∏°‡∏à‡∏ö!\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score);
    location.reload();
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
moveButton();
</script>

</body>
</html>
